<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>COVID-19 cijfers besmet en op IC in Nederland</title>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  <style type="text/css">
    html, body {
        height: 100%;
        width: 100%;
        margin: 0;
        font-size: 20px;
        font-family: Helvetica, Arial, sans-serif;
    }

    #chart {
      margin: 10px;
    }

    #context {
      font-size: 14px;
      line-height: 1.25;
      max-width: 900px;
      margin: 10px;
    }

    #context li {
      margin-bottom: 20px;
    }

    @media only screen and (max-width: 1440px) {
      #context {
        font-size: 30px;
        max-width: none;
      }
    } 

    @media only screen and (max-width: 768px) {
      #context {
        font-size: 20px;
        max-width: none;
      }
    } 
  </style>
  </head>
  <body>
      <div id="chart">      
      </div>
      <div id="context">
        <ul>
          <li><strong>COVID-19 virus positief laatste 3 weken:</strong> Het aantal mensen in Nederland dat positief is getest op het coronavirus in de laatste 3 weken volgens <a href="https://www.rivm.nl/nieuws/actuele-informatie-over-coronavirus" target="_blank">gegevens van het RIVM</a>. De teller van het RIVM geeft het totaal aantal positief geteste mensen in Nederland. Een groot deel van deze groep is inmiddels genezen of overleden. Het RIVM geeft geen getallen over genezingen.</li>
          <li><strong>COVID-19 patiënten op IC:</strong> Het aantal mensen in Nederland dat positief is getest op het coronavirus en op de Intensive Care van een Nederlands ziekenhuis is opgenomen volgens <a href="https://nvic.nl/" target="_blank">gegevens van het NVIC (Nederlandse Vereniging voor Intensive Care)</a>. IC data voor 14,15 en 16 maart is indirect verkregen via diverse nieuwsbronnen verkregen.</li>
          <li><strong>Maximale IC capaciteit Nederland (1000 tot 1500):</strong> IC capaciteit volgens quote van Diederik Gommers op <a href="https://nos.nl/artikel/2327625-volgende-week-500-tot-1000-coronapatienten-op-ic-s-verwacht.html" target="_blank">NOS.nl</a> op 19-03-2020: "In een crisisfase kan dat aantal [IC-plekken voor coronapatiënten] worden verhoogd tot ongeveer 1500 'corona-bedden'. Volgens Diederik Gommers van de Vereniging zijn er dan wel 500 extra beademingsapparaten nodig, die nog gevonden moeten worden.".</li>
          <li><strong>Waarom deze grafiek?</strong> Grafieken over corona tonen vaak cumulatieve infectiecijfers (de lijn kan alleen stijgen). Daarnaast vond ik geen grafiek die de IC cijfers van het NVIC achter elkaar zet (het NVIC geeft alleen het actuele cijfer van vandaag). Ik heb dit in een grafiek gezet en deel deze nu online.</li>
          <li><a href="https://twitter.com/jvannistelrooy" target="_blank">https://twitter.com/jvannistelrooy</a></li>
          <li><strong>Bronnen:</strong> <a href="https://www.rivm.nl/nieuws/actuele-informatie-over-coronavirus" target="_blank">RIVM</a>, <a href="https://nvic.nl/" target="_blank">NVIC</a></li>
          <li><strong>Laatste update:</strong> <span id="lastModified"></span></li>
        </ul> 
      </div>

  <script type="text/javascript">
    var nl = {
      "name": "nl",
      "options": {
        "months": [
          "Januari",
          "Februari",
          "Maart",
          "April",
          "Mei",
          "Juni",
          "Juli",
          "Augustus",
          "September",
          "Oktober",
          "November",
          "December"
        ],
        "shortMonths": [
          "Jan",
          "Feb",
          "Mrt",
          "Apr",
          "Mei",
          "Jun",
          "Jul",
          "Aug",
          "Sep",
          "Okt",
          "Nov",
          "Dec"
        ],
        "days": [
          "Zondag",
          "Maandag",
          "Dinsdag",
          "Woensdag",
          "Donderdag",
          "Vrijdag",
          "Zaterdag"
        ],
        "shortDays": ["Zo", "Ma", "Di", "Wo", "Do", "Vr", "Za"],
        "toolbar": {
          "exportToSVG": "Download SVG",
          "exportToPNG": "Download PNG",
          "exportToCSV": "Download CSV",
          "menu": "Menu",
          "selection": "Selectie",
          "selectionZoom": "Zoom selectie",
          "zoomIn": "Zoom in",
          "zoomOut": "Zoom out",
          "pan": "Verplaatsen",
          "reset": "Standaardwaarden"
        }
      }
    };
    var positiveCummulative = [1,2,7,10,18,23,38,82,128,188,265,321,382,503,614,804,959,1135,1413,1705,2051,2460,2994,3631];
    var positiveActive = [1,2,3,9,16,16,28,64,105,150,183,193,194,238,293,422,456,521,609,746,916,1047,1289,1580];
    var ICData = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,35,55,96,135,177,210,281,354];
    var dateLabels = ["2/27/2020","2/28/2020","2/29/2020","3/1/2020","3/2/2020","3/3/2020","3/4/2020","3/5/2020","3/6/2020","3/7/2020","3/8/2020","3/9/2020","3/10/2020","3/11/2020","3/12/2020","3/13/2020","3/14/2020","3/15/2020","3/16/2020","3/17/2020","3/18/2020","3/19/2020","3/20/2020","3/21/2020"];


    function autorun()
    {

      // Graph code
      var options = {
          series: [{
            name: "COVID-19 virus positief laatste 3 weken",
            data: positiveActive
          },{
            name: "COVID-19 patiënten op IC",
            data: ICData
          }
          ],
          xaxis: {
            type: "categories",
            categories: dateLabels,
            labels: {
              style: {
                fontSize: '16px'
              },
              formatter: function(value, timestamp, index) {
                return moment(value).format("D-MMM")
              }
            }
          },
          annotations: {
            yaxis: [{
              y: 1000,
              y2: 1500,
              borderColor: '#000',
              fillColor: '#d73539',
              opacity: 0.2,
              label: {
                borderColor: '#d73539',
                style: {
                  fontSize: '14px',
                  color: '#FFF',
                  background: '#d73539',
                },
                text: 'Maximale IC capaciteit Nederland (1000 tot 1500)',
              }
            }],
            points: [{
              x: moment(dateLabels[dateLabels.length - 1]).format("D-MMM"),
              y: positiveActive[positiveActive.length - 1],
              marker: {
                size: 0,
              },
              label: {
                offsetY: -5,
                borderColor: '#27648b',
                textAnchor: 'end',
                position: 'right',
                style: {
                  fontSize: '14px',
                  color: '#fff',
                  background: '#27648b',
                },
                text: 'COVID-19 virus positief laatste 3 weken',
              }
            },
            {
              x: moment(dateLabels[dateLabels.length - 1]).format("D-MMM"),
              y: ICData[ICData.length - 1],
              marker: {
                size: 0,
              },
              label: {
                offsetY: -5,
                borderColor: '#f4a334',
                textAnchor: 'end',
                position: 'right',
                style: {
                  fontSize: '14px',
                  color: '#fff',
                  background: '#f4a334',
                },
                text: 'COVID-19 patiënten op IC',
              }
            }]
          },
          yaxis: {
            min: 0,
            max: 1800,
            tickAmount: 8,
            labels: {
              style: {
                fontSize: '16px'
              }
            }
          },
          chart: {
            locales: [nl],
            defaultLocale: 'nl',
            height: '96%',
            type: 'line',
            toolbar: {
              show: false
            },
          },
          dataLabels: {
            enabled: true,
            textAnchor: 'end',
            // formatter: function (value) {
            //   if(value == positiveData[positiveData.length - 1]) { 
            //     return "Positief: " + value 
            //   } else if(value == ICData[ICData.length - 1]) { 
            //     return "IC: " + value 
            //   } else {
            //     return value;
            //   }
            // }
          },
          markers: {
            size: 0,
          },
          stroke: {
            curve: 'straight',
          },
          colors:['#27648b', '#f4a334', '#d73539'],
          title: {
            text: "Coronavirus en IC capaciteit in Nederland",
            margin: 50,
            style: {
              fontSize:  '30px',
              fontWeight:  'bold',
              color:  '#263238'
            },
          },
          legend: {
            position: 'top',
            fontSize: '16px',
            horizontalAlign: 'center',
            itemMargin: {
                horizontal: 10,
                vertical: 5
            },  
          },
          responsive: [{
            breakpoint: 1440,
            options: {
              chart: {
                height: '1150',
              },
              tooltip: {
                enabled: false,
              },
              stroke: {
                width: 10,
              },
              title: {
                margin: 140,
                offsetY: -10,
                offsetX: 10,
                style: {
                  fontSize:  '40px',
                },
              },
              xaxis: {
                labels: {
                  offsetY: 20,
                  rotate: -45,
                  style: {
                    fontSize: '35px'
                  },
                  // formatter: function(value, timestamp, index) {
                  //   console.log(value + " : " + timestamp + " : " + index + " : " + dateLabels.indexOf(value));
                  //   if (positiveActive.length % 2 == 0 && dateLabels.indexOf(value) % 2 != 0){
                  //     return moment(value).format("D-M");
                  //   } else if (positiveActive.length % 2 != 0 && dateLabels.indexOf(value) % 2 == 0){
                  //     return moment(value).format("D-M");
                  //   } else {
                  //     return "";
                  //   }
                  // }
                }
              },
              yaxis: {
                max: 1600,
                floating: true,
                labels: {
                  show: true,
                  align: 'left',
                  offsetX: 90,
                  style: {
                    fontSize: '35px',
                  }
                }
              },
              dataLabels: {
                enabled: true,
                style: {
                  fontSize: '35px',
                },
                formatter: function(value, timestamp, index) {
                    if(value == positiveActive[positiveActive.length-1] || value == ICData[ICData.length-1]){
                      return value;
                    } else {
                      return "";
                    }
                }
              },
              legend: {
                show: false,
                fontSize: '35px',
                horizontalAlign: 'left',
                itemMargin: {
                    horizontal: 10,
                    vertical: 2
                },  
              },
              annotations: {
                yaxis: [{
                  y: 1000,
                  y2: 1500,
                  borderColor: '#000',
                  fillColor: '#d73539',
                  opacity: 0.2,
                  label: {
                    borderColor: '#d73539',
                    style: {
                      fontSize: '35px',
                      color: '#FFF',
                      background: '#d73539',
                    },
                    text: 'Maximale IC capaciteit Nederland (1000 tot 1500)',
                  }
                }],
                points: [{
                  x: moment(dateLabels[dateLabels.length - 1]).format("D-M"),
                  y: positiveActive[positiveActive.length - 1],
                  marker: {
                    size: 0,
                  },
                  label: {
                    offsetY: -5,
                    borderColor: '#27648b',
                    textAnchor: 'end',
                    position: 'right',
                    style: {
                      fontSize: '35px',
                      color: '#fff',
                      background: '#27648b',
                    },
                    text: 'COVID-19 virus positief laatste 3 weken',
                  }
                },
                {
                  x: moment(dateLabels[dateLabels.length - 1]).format("D-M"),
                  y: ICData[ICData.length - 1],
                  marker: {
                    size: 0,
                  },
                  label: {
                    offsetY: -5,
                    borderColor: '#f4a334',
                    textAnchor: 'end',
                    position: 'right',
                    style: {
                      fontSize: '35px',
                      color: '#fff',
                      background: '#f4a334',
                    },
                    text: 'COVID-19 patiënten op IC',
                  }
                }]
              }
            }
          }]
        };

      var chart = new ApexCharts(document.querySelector("#chart"), options);
      chart.render();


      document.getElementById("lastModified").innerHTML = moment(document.lastModified).format("D-M-YYYY H:mm");
    }
    if (window.addEventListener) window.addEventListener("load", autorun, false);
    else if (window.attachEvent) window.attachEvent("onload", autorun);
    else window.onload = autorun;
    </script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.12.0/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.12.0/firebase-analytics.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyBRF66m5briRob4ESG5a6SJmBHY9qqbuWo",
        authDomain: "guilin-f3f04.firebaseapp.com",
        databaseURL: "https://guilin-f3f04.firebaseio.com",
        projectId: "guilin-f3f04",
        storageBucket: "guilin-f3f04.appspot.com",
        messagingSenderId: "483466910648",
        appId: "1:483466910648:web:f2fa9d6817afbae86dcd4d",
        measurementId: "G-7G8BF0BJ57"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>
  </body>
</html>
